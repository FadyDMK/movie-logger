import{p as V,t as m,a as d,c as Q,s as $,e as w,f as oa,d as la}from"../chunks/Cp7EwV3K.js";import{i as M}from"../chunks/C6gcHL8Z.js";import{b as na,L as va,l as ca,aq as da,C as fa,h as ua,i as pa,R as P,W as l,X as n,T as Y,a9 as J,V as x,S as W,d as a,_ as B,a0 as g,aa as Z,ab as aa,ap as ha,a5 as ma}from"../chunks/BbjLgv-f.js";import{i as I}from"../chunks/Nn1O9p7-.js";import{e as ea,i as ta}from"../chunks/B2D20eJu.js";import{b as L,r as ka,a as D,e as K}from"../chunks/DtMnDJjb.js";import{b as _a}from"../chunks/DK56ITja.js";import{g as sa,c as ga}from"../chunks/1UrTQeer.js";import{i as X}from"../chunks/CbwIA3qU.js";function ba(y,u,...o){var r=y,t=da,e;na(()=>{t!==(t=u())&&(e&&(fa(e),e=null),e=ca(()=>t(r,...o)))},va),ua&&(r=pa)}var qa=m('<button class="movie-line svelte-1asqs3z" tabindex="0"><img class="svelte-1asqs3z"> <div class="info svelte-1asqs3z"><h2 class="svelte-1asqs3z"> </h2> <h3 class="svelte-1asqs3z"> </h3> <h3 class="svelte-1asqs3z"> </h3></div></button>'),xa=m('<div class="no-movies svelte-1asqs3z">No movies found</div>'),ya=m('<div class="container svelte-1asqs3z"><!></div>');function Ta(y,u){P(u,!1);let o=V(u,"movies",24,()=>[]);const r=s=>{sa(`/movie/${s}`)};M();var t=ya(),e=l(t);{var N=s=>{var b=Q(),T=J(b);ea(T,1,o,ta,(S,v)=>{var k=qa(),_=l(k),c=x(_,2),f=l(c),q=l(f,!0);n(f);var z=x(f,2),p=l(z,!0);n(z);var C=x(z,2),R=l(C,!0);n(C),n(c),n(k),W(()=>{L(_,"src",a(v).Poster),L(_,"alt",a(v).Title),$(q,a(v).Title),$(p,a(v).Year),$(R,a(v).Type)}),w("click",k,()=>{r(a(v).imdbID)}),w("keypress",k,()=>r(a(v).imdbID)),d(S,k)}),d(s,b)},A=s=>{var b=xa();d(s,b)};I(e,s=>{o().length>0?s(N):s(A,!1)})}n(t),d(y,t),Y()}var wa=m('<div class="loading svelte-194s9pn">Loading...</div>'),La=m('<div class="no-movies svelte-194s9pn">No movies found</div>'),Na=m('<div class="container svelte-194s9pn"><input id="search" placeholder="Search for a movie" class="svelte-194s9pn"> <div class="result svelte-194s9pn"><!></div></div>');function Sa(y,u){P(u,!1);let o=B(""),r=B([]),t,e=B(!1);function N(){g(e,!0),t&&clearTimeout(t),t=setTimeout(A,500)}async function A(){if(!a(o)){s();return}const f=await fetch(`https://www.omdbapi.com/?apikey=4b24ca2c&s=${a(o)}`).then(q=>{if(!q.ok)throw new Error("Failed to fetch data");return q.json()}).catch(q=>{console.error(q)});g(r,(f==null?void 0:f.Search)||[]),g(e,!1)}function s(){g(o,""),g(r,[]),g(e,!1)}ga(()=>{s()}),M();var b=Na(),T=l(b);ka(T);var S=x(T,2),v=l(S);{var k=c=>{var f=wa();d(c,f)},_=(c,f)=>{{var q=p=>{Ta(p,{get movies(){return a(r)}})},z=(p,C)=>{{var R=F=>{var j=La();d(F,j)};I(p,F=>{a(r).length===0&&a(o)&&F(R)},C)}};I(c,p=>{a(r).length>0?p(q):p(z,!1)},f)}};I(v,c=>{a(e)?c(k):c(_,!1)})}n(S),n(b),_a(T,()=>a(o),c=>g(o,c)),w("input",T,N),d(y,b),Y()}const za=""+new URL("../assets/logo.CmU-GB9Y.png",import.meta.url).href;var Ia=m('<a class="logo-link-text svelte-qqkruk"><img class="logo svelte-qqkruk"> </a>'),Aa=m('<img class="logo svelte-qqkruk">'),Ca=m('<div role="button" tabindex="0"><a class="link-text svelte-qqkruk"> </a></div>'),Ra=m("<button>Log Out</button>"),Ua=m('<nav><div class="menu-icon svelte-qqkruk"><div class="icon-wrapper svelte-qqkruk" role="button" tabindex="0"><i></i></div> <!></div> <div class="searchbar svelte-qqkruk"><!></div> <!> <!></nav>');function Ea(y,u){P(u,!1);const[o,r]=la(),t=()=>oa(X,"$isAuthed",o),e=B();async function N(){X.set(!1),await sa("/auth/logout")}console.log("isAuthed:",t());let A=typeof window<"u"?window.innerWidth:0,s=B(!1);function b(){A=window.innerWidth,A>1024&&g(s,!1)}const T=()=>{g(s,!a(s))},S=()=>{g(s,!1)};Z(()=>t(),()=>{g(e,{logo:!0,logoSrc:za,logoLink:!0,linkUrl:"/",optionalLinkText:"",altText:"logo",links:[{url:"/",displayInNav:!0,linkText:"Home"},{url:"/log",displayInNav:t(),linkText:"Log"},{url:"/notfound",displayInNav:!1,linkText:""},{url:"/auth/login",displayInNav:!t(),linkText:"Log In"},{url:"/auth/register",displayInNav:!t(),linkText:"Sign Up"}]})}),aa(),M();var v=Ua();w("resize",ha,b);var k=l(v),_=l(k),c=l(_);n(_);var f=x(_,2);{var q=h=>{var i=Ia(),U=l(i),G=x(U,1,!0);n(i),W(()=>{L(i,"href",a(e).linkUrl),L(U,"src",a(e).logoSrc),L(U,"alt",a(e).altText),$(G,a(e).optionalLinkText?a(e).optionalLinkText:"")}),d(h,i)},z=h=>{var i=Aa();W(()=>{L(i,"src",a(e).logoSrc),L(i,"alt",a(e).altText)}),d(h,i)};I(f,h=>{a(e).logoLink?h(q):h(z,!1)})}n(k);var p=x(k,2),C=l(p);Sa(C,{}),n(p);var R=x(p,2);ea(R,1,()=>a(e).links,ta,(h,i)=>{var U=Q(),G=J(U);{var ra=H=>{var E=Ca(),O=l(E),ia=l(O,!0);n(O),n(E),W(()=>{D(E,1,K(a(s)?"navbar-item-clicked":"navbar-item"),"svelte-qqkruk"),L(O,"href",a(i).url),$(ia,a(i).linkText)}),w("click",E,S),w("keypress",E,S),d(H,E)};I(G,H=>{a(i).displayInNav&&H(ra)})}d(h,U)});var F=x(R,2);{var j=h=>{var i=Ra();W(()=>D(i,1,K(a(s)?"navbar-item-clicked":"navbar-item"),"svelte-qqkruk")),w("click",i,N),d(h,i)};I(F,h=>{t()&&h(j)})}n(v),W(()=>{D(v,1,K(a(s)?"navbar-clicked":"navbar"),"svelte-qqkruk"),D(c,1,K(a(s)?"fa fa-times":"fas fa-bars"),"svelte-qqkruk")}),w("click",_,T),w("keypress",_,T),d(y,v),Y(),r()}var Wa=m("<!> <!>",1);function Ga(y,u){P(u,!1);let o=V(u,"children",8),r=V(u,"data",8);Z(()=>ma(r()),()=>{X.set(r().isAuthed)}),aa(),M();var t=Wa(),e=J(t);Ea(e,{});var N=x(e,2);ba(N,o),d(y,t),Y()}export{Ga as component};
